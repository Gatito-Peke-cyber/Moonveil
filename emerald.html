<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="color-scheme" content="dark light" />
  <title>Moonveil â€” Emerald Collector</title>

  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700;900&family=Cinzel:wght@400;600;900&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet" />

  <link rel="icon" type="image/svg+xml"
        href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='64' height='64'%3E%3Crect width='100%25' height='100%25' fill='%23030d06'/%3E%3Crect x='8' y='8' width='48' height='48' fill='%2310b981'/%3E%3Crect x='14' y='14' width='36' height='36' fill='%23059669'/%3E%3C/svg%3E">

  <link rel="stylesheet" href="emerald.css" />
</head>
<body>

  <!-- Fondo con partÃ­culas -->
  <div class="bg">
    <canvas id="bgParticles" aria-hidden="true"></canvas>
    <div class="bg-parallax">
      <div class="layer sky"  aria-hidden="true"></div>
      <div class="layer far"  aria-hidden="true"></div>
      <div class="layer mid"  aria-hidden="true"></div>
      <div class="layer near" aria-hidden="true"></div>
    </div>
    <div class="emerald-silhouette" aria-hidden="true"></div>
  </div>

  <!-- HUD / Navbar (IDÃ‰NTICO al original) -->
  <header class="top-hud" role="banner">
    <nav class="navbar" aria-label="NavegaciÃ³n principal">
      <a class="brand" href="inicio.html" aria-label="Ir a inicio">
        <span class="cube" aria-hidden="true"></span>
        <span class="brand__title">Moonveil <b>Portal</b></span>
      </a>
      <button class="nav-toggle" id="navToggle" aria-label="Abrir menÃº"><span></span></button>
      <ul class="nav-links" id="navLinks">
        <li><a href="inicio.html">Inicio</a></li>
        <li><a href="emerald.html" class="active">Esmeraldas</a></li>
        <li><a href="index.html">Salir</a></li>
      </ul>
    </nav>

    <div class="hud-stats" aria-label="Indicadores">
      <div class="hud__bars">
        <div class="hud-bar hp" data-val="88" aria-label="Vida 88%"></div>
        <div class="hud-bar xp" data-val="62" aria-label="Experiencia 62%"></div>
      </div>
      <div class="hud__inv" aria-label="Inventario rÃ¡pido">
        <button class="slot" title="Esmeraldas"><span class="i i-emerald" aria-hidden="true"></span></button>
        <button class="slot" title="Mapa"><span class="i i-map" aria-hidden="true"></span></button>
        <button class="slot" title="Pluma"><span class="i i-feather" aria-hidden="true"></span></button>
      </div>
    </div>
  </header>

  <!-- Contenido Principal -->
  <main class="emerald-main" role="main">

    <!-- Hero -->
    <section class="emerald-hero">
      <div class="hero-content">
        <h1 class="hero-title">
          <span class="title-line">COLECTOR DE</span>
          <span class="title-line emerald-text">ESMERALDAS</span>
        </h1>
        <p class="hero-subtitle">Meta: 1920 Esmeraldas Â· 30 Stacks Ã— 64</p>

        <!-- EstadÃ­sticas -->
        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-value" id="stacksCount">0</div>
            <div class="stat-label">Stacks Recaudados</div>
          </div>
          <div class="stat-card">
            <div class="stat-value" id="emeraldsCount">0</div>
            <div class="stat-label">Esmeraldas Totales</div>
          </div>
          <div class="stat-card">
            <div class="stat-value" id="progressPercent">0%</div>
            <div class="stat-label">Progreso Total</div>
          </div>
          <div class="stat-card">
            <div class="stat-value" id="remainingStacks">30</div>
            <div class="stat-label">Stacks Restantes</div>
          </div>
        </div>

        <!-- Barra de progreso global -->
        <div class="global-progress">
          <div class="progress-bar-container">
            <div class="progress-bar-fill" id="globalProgressBar"></div>
            <div class="progress-glow"></div>
          </div>
          <div class="progress-marks">
            <span>0</span>
            <span>5</span>
            <span>10</span>
            <span>15</span>
            <span>20</span>
            <span>25</span>
            <span>30</span>
          </div>
        </div>
      </div>
    </section>

    <!-- LÃ­nea de Tiempo -->
    <section class="timeline-section">
      <h2 class="section-title">
        <span class="title-icon">ğŸ’š</span>
        LÃ­nea de RecaudaciÃ³n
        <span class="title-icon">ğŸ’š</span>
      </h2>

      <div class="timeline-container">
        <div class="timeline-line" aria-hidden="true"></div>
        <div class="timeline" id="stacksTimeline">
          <!-- Los stacks se generan con JS -->
        </div>
      </div>

      <!-- Panel de detalles -->
      <div class="details-panel" id="detailsPanel">
        <div class="panel-header">
          <h3>Detalles del Stack</h3>
          <button class="close-btn" id="closeDetails">âœ•</button>
        </div>
        <div class="panel-content" id="panelContent">
          <p class="muted">Selecciona un stack para ver los detalles</p>
        </div>
      </div>
    </section>

    <!-- Recompensas -->
    <section class="achievements-section">
      <h2 class="section-title">
        <span class="title-icon">ğŸ†</span>
        Recompensas Ã‰picas
        <span class="title-icon">ğŸ†</span>
      </h2>

      <div class="achievements-grid" id="achievementsGrid">
        <!-- Generado con JS -->
      </div>
    </section>

  </main>

  <!-- Footer -->
  <footer class="emerald-footer">
    <div class="footer-content">
      <p class="footer-text">
        <span class="em-icon">ğŸ’š</span>
        Moonveil Portal â€” Emerald Collector
        <span class="em-icon">ğŸ’š</span>
      </p>
      <p class="footer-subtitle">Cada esmeralda cuenta Â· 1920 hacia la gloria</p>
    </div>
  </footer>

  <!-- Toast -->
  <div id="toast" class="toast" role="status" aria-live="polite" aria-atomic="true"></div>

  <!-- BotÃ³n flotante de mÃºsica -->
  <button class="pixel-button floating-music" onclick="toggleMusic()">ğŸµ MÃºsica</button>

  <!-- MÃºsica de fondo -->
  <audio id="bg-music" loop>
    <source src="music/dragon-epic.mp3" type="audio/mpeg" />
  </audio>

  <script src="emerald.js"></script>
</body>
</html>