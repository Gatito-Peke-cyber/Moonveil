<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>SBM-G — Terminal Híbrida Profesional v2.0</title>

  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml"
        href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='64' height='64'%3E%3Crect width='100%25' height='100%25' fill='%23111610'/%3E%3Crect x='8' y='8' width='48' height='48' fill='%23d946ef'/%3E%3Crect x='14' y='14' width='36' height='36' fill='%239333ea'/%3E%3C/svg%3E">

  <!-- Styles -->
  <link rel="stylesheet" href="SBM-G.css" />

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
  
  <!-- Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <!-- Meta -->
  <meta name="description" content="SBM-G v2.0 — Terminal híbrida profesional avanzada con sistema de niveles, misiones, cifrado real y más.">
</head>
<body>

  <!-- APP container -->
  <div id="sbm-container" class="theme-default">

    <!-- Top bar (OS-like) -->
    <header class="topbar">
      <div class="topbar-left">
        <div class="logo">SBM-G v2.0</div>
        <nav class="top-nav">
          <a href="inicio.html" class="btn small btn-home" title="Ir a Inicio">
            <i class="fas fa-home"></i> Inicio
          </a>
          <button class="btn small" data-action="terminal">Terminal</button>
          <button class="btn small" data-action="logs">Logs</button>
          <button class="btn small" data-action="missions">Misiones</button>
          <button class="btn small" data-action="stats">Stats</button>
        </nav>
      </div>
      <div class="topbar-right">
        <div id="status-indicator" class="status status-guest">
          <span id="status-text">guest</span>
          <div class="xp-bar" id="xp-bar">
            <div class="xp-fill" id="xp-fill"></div>
          </div>
        </div>
        <div class="clock" id="clock">--:--</div>
        <div class="level-badge" id="level-badge">Lvl 1</div>
      </div>
    </header>

    <!-- Main split: sidebar + workspace -->
    <main class="main-split">

      <!-- Sidebar: file explorer -->
      <aside id="sidebar" class="sidebar">
        <div class="sidebar-header">
          <div class="title">Explorador</div>
          <div class="controls">
            <button class="icon-btn" id="new-file" title="Nuevo archivo"><i class="fas fa-file"></i></button>
            <button class="icon-btn" id="new-folder" title="Nueva carpeta"><i class="fas fa-folder-plus"></i></button>
            <button class="icon-btn" id="refresh-tree" title="Refrescar"><i class="fas fa-redo"></i></button>
          </div>
        </div>

        <div class="search-box">
          <input id="explorer-search" placeholder="Buscar archivos..." />
          <button class="search-btn" id="advanced-search"><i class="fas fa-search-plus"></i></button>
        </div>

        <div id="file-tree" class="file-tree" aria-live="polite">
          <!-- Rendered dinámicamente -->
        </div>

        <div class="sidebar-footer">
          <div class="stats-row">
            <span class="stat-item"><i class="fas fa-hdd"></i> <span id="storage-used">0</span>/<span id="storage-total">100</span>KB</span>
            <span class="stat-item"><i class="fas fa-shield-alt"></i> <span id="locked-count">0</span> bloqueados</span>
          </div>
          <div class="small muted">SBM-G v2.0 • Híbrido Profesional</div>
        </div>
      </aside>

      <!-- Workspace: tabs + terminal + panels -->
      <section class="workspace">

        <!-- Tabs for opened files -->
        <div class="tabs" id="tabs">
          <div class="tabs-left">
            <button class="tab active" data-tab="terminal">
              <i class="fas fa-terminal"></i> Terminal
            </button>
          </div>
          <div class="tabs-right" id="tabs-right">
            <button id="toggle-music" class="icon-btn" title="Play/Pause Music"><i class="fas fa-music"></i></button>
            <button id="btn-themes" class="icon-btn" title="Temas"><i class="fas fa-palette"></i></button>
            <button id="btn-fullscreen" class="icon-btn" title="Pantalla completa"><i class="fas fa-expand"></i></button>
          </div>
        </div>

        <!-- Workspace content -->
        <div class="workspace-body">

          <!-- Terminal panel -->
          <div id="panel-terminal" class="panel panel-terminal active" data-panel="terminal">
            <!-- Terminal output con scroll -->
            <div id="terminal-output" class="terminal-output" role="log" aria-live="polite"></div>

            <!-- Terminal input area -->
            <form id="terminal-form" class="terminal-form" autocomplete="off" spellcheck="false">
              <div class="prompt">
                <span id="prompt-user">guest</span>@SBM-G:<span id="prompt-path">/</span>$&nbsp;
              </div>
              <input id="terminal-input" class="terminal-input" placeholder="Escribe un comando... (help)" />
              <button type="submit" class="send-btn"><i class="fas fa-paper-plane"></i></button>
            </form>

            <!-- Quick commands bar -->
            <div class="quick-commands">
              <button class="quick-cmd" data-cmd="help">help</button>
              <button class="quick-cmd" data-cmd="ls -la">ls -la</button>
              <button class="quick-cmd" data-cmd="tree">tree</button>
              <button class="quick-cmd" data-cmd="status">status</button>
              <button class="quick-cmd" data-cmd="missions">missions</button>
            </div>
          </div>

          <!-- File preview / editor panel -->
          <div id="panel-editor" class="panel panel-editor hidden" data-panel="editor">
            <div class="editor-toolbar">
              <div class="editor-info" id="editor-info">Archivo</div>
              <div class="editor-actions">
                <button class="btn small" id="btn-save"><i class="fas fa-save"></i> Guardar</button>
                <button class="btn small" id="btn-close-editor"><i class="fas fa-times"></i> Cerrar</button>
              </div>
            </div>
            <textarea id="editor-text" class="editor-text" spellcheck="false"></textarea>
            <div class="editor-status" id="editor-status">
              <span class="status-item">Tamaño: <span id="editor-size">0</span> chars</span>
              <span class="status-item">Líneas: <span id="editor-lines">1</span></span>
            </div>
          </div>

          <!-- Logs panel -->
          <div id="panel-logs" class="panel panel-logs hidden" data-panel="logs">
            <div class="panel-title">Logs del sistema</div>
            <div class="log-filters">
              <button class="log-filter active" data-level="all">Todos</button>
              <button class="log-filter" data-level="info">Info</button>
              <button class="log-filter" data-level="warning">Warning</button>
              <button class="log-filter" data-level="error">Error</button>
              <button class="log-filter" data-level="success">Success</button>
            </div>
            <div id="logs-output" class="logs-output"></div>
            <div class="panel-actions">
              <button class="btn small" id="btn-clear-logs"><i class="fas fa-trash"></i> Limpiar</button>
              <button class="btn small" id="btn-export-logs"><i class="fas fa-download"></i> Exportar</button>
            </div>
          </div>

          <!-- Missions panel -->
          <div id="panel-missions" class="panel panel-missions hidden" data-panel="missions">
            <div class="panel-title">Sistema de Misiones</div>
            <div class="missions-container">
              <div class="mission-active" id="active-mission">
                <h4><i class="fas fa-bullseye"></i> Misión Activa</h4>
                <div id="mission-content">No hay misión activa</div>
                <div class="mission-progress">
                  <div class="progress-bar">
                    <div class="progress-fill" id="mission-progress-fill"></div>
                  </div>
                  <span id="mission-progress-text">0%</span>
                </div>
              </div>
              <div class="missions-list" id="missions-list">
                <!-- Misiones dinámicas -->
              </div>
            </div>
          </div>

          <!-- Stats panel -->
          <div id="panel-stats" class="panel panel-stats hidden" data-panel="stats">
            <div class="panel-title">Estadísticas del Sistema</div>
            <div class="stats-grid">
              <div class="stat-card">
                <h4><i class="fas fa-user"></i> Usuario</h4>
                <div class="stat-value" id="stat-user">guest</div>
                <div class="stat-label">Nivel <span id="stat-level">1</span></div>
              </div>
              <div class="stat-card">
                <h4><i class="fas fa-star"></i> XP</h4>
                <div class="stat-value" id="stat-xp">0</div>
                <div class="stat-label">Próximo nivel: <span id="stat-next-xp">100</span></div>
              </div>
              <div class="stat-card">
                <h4><i class="fas fa-file"></i> Archivos</h4>
                <div class="stat-value" id="stat-files">0</div>
                <div class="stat-label"><span id="stat-locked">0</span> bloqueados</div>
              </div>
              <div class="stat-card">
                <h4><i class="fas fa-clock"></i> Tiempo</h4>
                <div class="stat-value" id="stat-time">00:00</div>
                <div class="stat-label">Sesión activa</div>
              </div>
            </div>
            <div class="stats-details">
              <h4><i class="fas fa-trophy"></i> Logros</h4>
              <div id="achievements-list" class="achievements-list">
                <!-- Logros dinámicos -->
              </div>
            </div>
          </div>

        </div> <!-- workspace-body -->

      </section>

      <!-- Right sidebar: AI & help -->
      <aside class="rightbar" id="rightbar">
        <div class="right-section">
          <h4><i class="fas fa-robot"></i> Asistente AI</h4>
          <div class="ai-assistant">
            <div id="ai-message" class="ai-message">¿Necesitas ayuda? Escribe una pregunta abajo.</div>
            
            <!-- Quick AI questions -->
            <div class="ai-quick-questions">
              <button class="ai-quick-btn" data-question="¿Cómo cifro un archivo?">
                <i class="fas fa-lock"></i> ¿Cómo cifro archivos?
              </button>
              <button class="ai-quick-btn" data-question="¿Cómo gano XP?">
                <i class="fas fa-star"></i> ¿Cómo gano XP?
              </button>
              <button class="ai-quick-btn" data-question="¿Qué comandos hay?">
                <i class="fas fa-terminal"></i> Comandos
              </button>
              <button class="ai-quick-btn" data-question="¿Dónde están los secretos?">
                <i class="fas fa-gem"></i> Secretos
              </button>
            </div>
            
            <input type="text" id="ai-input" class="ai-input" placeholder="Pregunta al asistente...">
            <button id="ai-send" class="btn small full-width"><i class="fas fa-paper-plane"></i> Preguntar</button>
          </div>
        </div>
        
        <div class="right-section">
          <h4><i class="fas fa-gem"></i> Secretos rápidos</h4>
          <ul id="quick-secrets" class="quick-list">
            <!-- dinámico -->
          </ul>
          <button id="btn-scan-secrets" class="btn small full-width"><i class="fas fa-search"></i> Escanear secretos</button>
        </div>
        
        <div class="right-section">
          <h4><i class="fas fa-terminal"></i> Comandos rápidos</h4>
          <div class="quick-commands-grid">
            <button class="cmd-chip" data-cmd="ls /secrets">secrets</button>
            <button class="cmd-chip" data-cmd="tree /docs">docs</button>
            <button class="cmd-chip" data-cmd="status">status</button>
            <button class="cmd-chip" data-cmd="themes">themes</button>
          </div>
        </div>

        <div class="right-section">
          <h4><i class="fas fa-chart-line"></i> Estado del Sistema</h4>
          <div class="stat">
            <i class="fas fa-user"></i> Usuario: <span id="ui-user">guest</span>
          </div>
          <div class="stat">
            <i class="fas fa-user-tag"></i> Rol: <span id="ui-role">guest</span>
          </div>
          <div class="stat">
            <i class="fas fa-folder"></i> Archivos: <span id="ui-count">0</span>
          </div>
          <div class="stat">
            <i class="fas fa-shield-alt"></i> Seguridad: <span id="ui-security">Baja</span>
          </div>
        </div>

        <div class="right-section">
          <h4><i class="fas fa-info-circle"></i> Notificaciones</h4>
          <div id="notifications" class="notifications">
            <!-- Notificaciones dinámicas -->
          </div>
        </div>

      </aside>

    </main>

    <!-- Footer -->
    <footer class="footer">
      <div>SBM-G v2.0 — Híbrido Profesional • Local • <span id="session-timer">00:00:00</span></div>
      <div class="muted small">
        <span id="hint-display">Escribe <strong>help</strong> en la terminal para empezar.</span>
        <span class="footer-buttons">
          <button class="footer-btn" id="btn-hint"><i class="fas fa-lightbulb"></i> Pista</button>
          <button class="footer-btn" id="btn-reset"><i class="fas fa-redo"></i> Reset</button>
          <button class="footer-btn" id="btn-export-all"><i class="fas fa-download"></i> Exportar</button>
        </span>
      </div>
    </footer>

    <!-- Modal -->
    <div id="modal-overlay" class="modal-overlay hidden">
      <div class="modal" id="modal">
        <div class="modal-header">
          <h3 id="modal-title">Modal</h3>
          <button class="modal-close" id="modal-close">&times;</button>
        </div>
        <div class="modal-body" id="modal-body">
          Contenido del modal
        </div>
        <div class="modal-footer" id="modal-footer">
          <button class="btn" id="modal-cancel">Cancelar</button>
          <button class="btn primary" id="modal-confirm">Confirmar</button>
        </div>
      </div>
    </div>

    <!-- Audio -->
    <audio id="bg-audio" loop preload="metadata">
      <source src="ald/music2.mp3" type="audio/mpeg">
    </audio>

    <!-- Audio para efectos -->
    <audio id="sfx-click" preload="auto"><source src="https://assets.mixkit.co/sfx/preview/mixkit-select-click-1109.mp3" type="audio/mpeg"></audio>
    <audio id="sfx-success" preload="auto"><source src="https://assets.mixkit.co/sfx/preview/mixkit-achievement-bell-600.mp3" type="audio/mpeg"></audio>
    <audio id="sfx-error" preload="auto"><source src="https://assets.mixkit.co/sfx/preview/mixkit-warning-alarm-buzzer-958.mp3" type="audio/mpeg"></audio>

  </div>

  <!-- Script principal -->
  <script src="SBM-G.js"></script>

</body>
</html>