<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="color-scheme" content="dark" />
  <title>Moonveil â€” Ruletas Premium</title>

  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700;900&family=Cinzel:wght@600;900&family=Press+Start+2P&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet" />

  <link rel="icon" type="image/svg+xml"
    href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='64' height='64'%3E%3Crect width='100%25' height='100%25' fill='%2309080f'/%3E%3Crect x='8' y='8' width='48' height='48' fill='%238b5cf6'/%3E%3Crect x='14' y='14' width='36' height='36' fill='%236d28d9'/%3E%3C/svg%3E">

  <link rel="stylesheet" href="premios.css" />
</head>
<body class="gacha-page">

  <!-- Fondo global -->
  <div class="bg" aria-hidden="true">
    <canvas id="bgParticles"></canvas>
    <div class="bg-parallax">
      <div class="layer sky"></div>
      <div class="layer far"></div>
      <div class="layer mid"></div>
      <div class="layer near"></div>
    </div>
    <div id="bgLayer" class="bg-layer"></div>
    <div class="gradient-orb orb-1"></div>
    <div class="gradient-orb orb-2"></div>
    <div class="gradient-orb orb-3"></div>
  </div>

  <!-- ===== HEADER â€“ mismo estilo que tienda.html, colores ruleta ===== -->
  <header class="top-hud" role="banner">
    <nav class="navbar" aria-label="NavegaciÃ³n principal">
      <a class="brand" href="inicio.html" aria-label="Ir a inicio">
        <span class="cube" aria-hidden="true"></span>
        <span class="brand__title">Moonveil <b>Portal</b></span>
      </a>
      <button class="nav-toggle" id="navToggle" aria-label="Abrir menÃº"><span></span></button>
      <ul class="nav-links" id="navLinks">
        <li><a href="inicio.html">Inicio</a></li>
        <li><a href="premios.html" class="active">Ruleta</a></li>
        <li><a href="index.html">Salir</a></li>
      </ul>
    </nav>

    <!-- HUD tickets (mismo estilo que hud-stats de tienda) -->
    <div class="hud-stats" aria-label="Tickets disponibles">
      <div class="hud__bars">
        <div class="hud-bar pity-bar" data-val="0" id="hudPityBarEpic"  aria-label="Pity Ã©pico"></div>
        <div class="hud-bar pity-bar legend" data-val="0" id="hudPityBarLeg" aria-label="Pity legendario"></div>
      </div>
      <div class="hud__tickets" id="hudTickets" aria-label="Tickets por ruleta">
        <!-- renderizado por JS -->
      </div>
    </div>
  </header>

  <!-- ===== HERO ===== -->
  <section class="hero">
    <div class="container">
      <div class="hero-inner reveal">
        <div class="hero-eyebrow">
          <span class="purple-dot"></span>
          Sistema de Recompensas Gacha
        </div>
        <h1 class="hero-title">
          <span class="ht-sm">BIENVENIDO A</span>
          <span class="ht-big">LAS RULETAS</span>
        </h1>
        <p class="hero-lead">Gira, colecciona y desbloquea premios exclusivos. Completa misiones para obtener <strong>tickets gratis</strong>. <span class="muted">(Los tickets de la Tienda se aplican aquÃ­)</span></p>

        <!-- EstadÃ­sticas rÃ¡pidas -->
        <div class="hero-stats-row reveal">
          <div class="stat-pill">
            <span class="stat-ico">ğŸŸï¸</span>
            <div class="stat-body">
              <div class="stat-val" id="totalTickets">0</div>
              <div class="stat-lbl">Total Tickets</div>
            </div>
          </div>
          <div class="stat-pill">
            <span class="stat-ico">ğŸ†</span>
            <div class="stat-body">
              <div class="stat-val" id="totalPrizes">0</div>
              <div class="stat-lbl">Premios Ganados</div>
            </div>
          </div>
          <div class="stat-pill">
            <span class="stat-ico">ğŸ²</span>
            <div class="stat-body">
              <div class="stat-val" id="totalSpins">0</div>
              <div class="stat-lbl">Giros Totales</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- ===== RECURSOS ===== -->
  <div class="container">
    <section class="resources-panel reveal">
      <div class="resources-header">
        <h3 class="sec-title"><span>ğŸ’</span> Recursos Disponibles</h3>
        <button id="btnInventory" class="btn-action">
          <span>ğŸ“¦</span> Inventario
          <span class="action-badge" id="invBadge">0</span>
        </button>
      </div>
      <div class="resources-grid">
        <div class="resource-col">
          <div class="col-label">ğŸŸï¸ Tickets por Ruleta</div>
          <div class="tickets-row" id="ticketsDisplay"></div>
        </div>
        <div class="resource-col">
          <div class="col-label">âš¡ Multiplicador</div>
          <div class="boost-pill">
            <div class="boost-icon-wrap">
              <div class="boost-circle">âš¡</div>
            </div>
            <div class="boost-info">
              <div class="boost-status" id="boostStatus">Disponible</div>
              <div class="boost-timer" id="boostTimer"></div>
            </div>
            <button id="multiplierBtn" class="btn-boost">Activar x2</button>
          </div>
        </div>
      </div>
    </section>

    <!-- ===== SELECTOR RULETAS ===== -->
    <section class="wheel-selector reveal">
      <div class="sel-header">
        <h3 class="sec-title"><span>ğŸ¡</span> Selecciona tu Ruleta</h3>
        <button id="btnOpenRules" class="btn-ghost">ğŸ“œ Reglas</button>
      </div>
      <div class="wheel-tabs" id="wheelTabs"></div>
    </section>

    <!-- ===== ÃREA PRINCIPAL ===== -->
    <section class="main-area">

      <!-- Misiones -->
      <aside class="panel missions-panel">
        <div class="panel-header">
          <span class="ph-icon">ğŸ¯</span>
          <h3 class="ph-title">Misiones</h3>
          <span class="ph-badge" id="missionsBadge">0</span>
        </div>
        <div class="panel-body" id="missionsList"></div>
      </aside>

      <!-- Centro: Ruleta -->
      <div class="center-stage">

        <!-- Info ruleta -->
        <div class="wheel-info-card">
          <div class="wi-row">
            <span class="wi-item">ğŸ¡ <b id="currentWheelName">â€”</b></span>
            <span class="wi-item">ğŸŸï¸ <b id="currentWheelTickets">0</b> tickets</span>
          </div>
          <p id="wheelDesc" class="wi-desc"></p>
          <span id="wheelExpire" class="wi-expire"></span>
        </div>

        <!-- Pity -->
        <div class="pity-card">
          <div class="pity-header-row">
            <span class="pity-lbl">Sistema de GarantÃ­a</span>
            <span class="pity-counter" id="currentPity">Epic:20 Leg:0/60</span>
          </div>
          <div class="pity-bars">
            <div class="pity-bar-wrap">
              <div class="pity-bar-label">Ã‰pico (cada 20)</div>
              <div class="pity-track"><div id="pityFillEpic" class="pity-fill epic"></div></div>
            </div>
            <div class="pity-bar-wrap">
              <div class="pity-bar-label">Legendario (60 tiros)</div>
              <div class="pity-track"><div id="pityFillLegend" class="pity-fill legend"></div></div>
            </div>
          </div>
        </div>

        <!-- Ruleta -->
        <div class="wheel-stage">
          <div class="wheel-container">
            <div id="wheel" class="wheel"></div>
            <div class="wheel-center">
              <div class="center-dot"></div>
              <div class="center-glow"></div>
            </div>
            <div class="wheel-pointer">â–¼</div>
          </div>
          <div id="wheelLock" class="wheel-lock" hidden>
            <div class="lock-box">
              <div class="lock-ico">ğŸ”’</div>
              <div id="lockText" class="lock-txt">Bloqueada</div>
              <div id="lockRange" class="lock-range">â€”</div>
            </div>
          </div>
        </div>

        <!-- Controles -->
        <div class="spin-controls">
          <button id="btnPreview" class="ctrl-btn secondary">ğŸ‘ï¸ Ver Premios</button>
          <button id="btnSpin" class="ctrl-btn primary pulse">ğŸ² Girar x1</button>
          <button id="btnSpin10" class="ctrl-btn primary large">âœ¨ Girar x10</button>
        </div>
      </div>

      <!-- Ãšltimo Premio -->
      <aside class="panel prize-panel">
        <div class="panel-header">
          <span class="ph-icon">ğŸ</span>
          <h3 class="ph-title">Ãšltimo Premio</h3>
        </div>
        <div class="panel-body">
          <div id="lastPrize" class="last-prize">
            <div class="no-prize">
              <div class="no-prize-ico">ğŸ°</div>
              <p>AÃºn no has girado</p>
            </div>
          </div>
        </div>
      </aside>

    </section>
  </div>

  <!-- NPC Zorrito -->
  <div class="npc-wrap" id="npc">
    <div class="npc-bubble" id="npc-dialog">Â¡Hola!</div>
    <div class="npc-avatar">
      <img src="img/fox2.gif" alt="Zorrito" />
    </div>
  </div>

  <!-- Modal -->
  <div id="modal" class="modal-overlay" aria-hidden="true">
    <div class="modal-backdrop"></div>
    <div class="modal-box">
      <button id="modalClose" class="modal-close">âœ•</button>
      <div id="modalContent" class="modal-content"></div>
    </div>
  </div>

  <!-- Toast -->
  <div id="toast" class="toast">
    <div class="toast-ico"></div>
    <div class="toast-txt"></div>
  </div>

  <!-- Footer -->
  <footer class="footer">
    <div class="container footer-inner">
      <div class="footer-brand">
        <span class="cube small" aria-hidden="true"></span>
        <span><strong>Moonveil</strong> Portal</span>
      </div>
      <div class="footer-links">
        <a href="#">Ayuda</a>
        <a href="#">TÃ©rminos</a>
        <a href="#">Privacidad</a>
      </div>
      <div class="footer-copy">
        Â© <span id="year"></span> Moonveil. Todos los derechos reservados.
      </div>
    </div>
  </footer>

  <script src="premios.js"></script>
  <script>document.getElementById('year').textContent = new Date().getFullYear();</script>
</body>
</html>