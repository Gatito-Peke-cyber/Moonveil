<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="color-scheme" content="dark" />
  <title>Moonveil â€” Troll Master</title>
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700;900&family=Cinzel:wght@400;600;900&family=Space+Mono:wght@400;700&display=swap" rel="stylesheet" />
  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='64' height='64'%3E%3Crect width='100%25' height='100%25' fill='%23030508'/%3E%3Ctext x='32' y='44' font-size='36' text-anchor='middle'%3EğŸ’£%3C/text%3E%3C/svg%3E">
  <link rel="stylesheet" href="ddb.css" />
</head>
<body>

<div class="bg">
  <canvas id="bgParticles" aria-hidden="true"></canvas>
  <div class="night-grid" aria-hidden="true"></div>
  <div class="stars" aria-hidden="true" id="stars"></div>
</div>

<!-- â•â•â• HEADER â•â•â• -->
<header class="top-hud" role="banner">
  <nav class="navbar" aria-label="NavegaciÃ³n principal">
    <a class="brand" href="inicio.html" aria-label="Ir a inicio">
      <span class="cube" aria-hidden="true"></span>
      <span class="brand__title">Moonveil <b>Portal</b></span>
    </a>
    <button class="nav-toggle" id="navToggle" aria-label="Abrir menÃº"><span></span></button>
    <ul class="nav-links" id="navLinks">
      <li><a href="inicio.html">Inicio</a></li>
      <li><a href="ddb.html" class="active">Troll Master</a></li>
      <li><a href="index.html">Salir</a></li>
    </ul>
  </nav>
  <div class="hud-stats" id="game-hud" style="display:none" aria-label="Estado">
    <div class="hud-chip em-chip"><span>ğŸ’</span><span id="h-em">300</span> esmeraldas</div>
    <div class="hud-chip day-chip"><span>ğŸ­</span>DÃ­a <span id="h-day">1</span>/15</div>
    <div class="hud-chip rep-chip"><span>ğŸ˜ˆ</span>Caos: <span id="h-rep">0</span>%</div>
    <div class="hud-chip pranks-chip"><span>ğŸ’£</span>Bromas: <span id="h-pranks">0</span></div>
    <button class="btn-nextday" id="btn-nextday">Noche Siguiente ğŸŒ™</button>
  </div>
</header>

<!-- â•â•â• PANTALLA TÃTULO â•â•â• -->
<div id="screen-title" class="screen screen-title active">
  <div class="title-wrap">
    <div class="title-badge">ğŸ­ DÃA DE LOS INOCENTES Â· MINECRAFT EDITION</div>
    <h1 class="game-title">
      <span class="troll-line">TROLL</span>
      <span class="master-line">MASTER</span>
    </h1>
    <p class="game-tagline">La Ãºnica agencia de bromas certificada de Minecraft â„¢</p>

    <div class="title-lore">
      <p>Es el 28 de diciembre en el servidor. El Creeper de al lado ha contratado tus servicios.<br>
      Los villagers <em>nunca</em> lo verÃ¡n venir. <b>tÃº sÃ­.</b></p>
    </div>

    <div class="title-features">
      <div class="feat"><span>ğŸ“‹</span><div><b>Encargos de bromas</b><small>Clientes pagan en esmeraldas</small></div></div>
      <div class="feat"><span>ğŸ›’</span><div><b>Compra materiales</b><small>TNT, slimeballs, dispensersâ€¦</small></div></div>
      <div class="feat"><span>âš—ï¸</span><div><b>Craftea la broma</b><small>Recetas secretas de troll</small></div></div>
      <div class="feat"><span>ğŸ’¬</span><div><b>Chat en vivo</b><small>Las vÃ­ctimas reaccionan</small></div></div>
    </div>

    <div class="title-mobs" aria-hidden="true">
      <span class="mob" style="--d:0s">ğŸ§Ÿ</span>
      <span class="mob" style="--d:.1s">ğŸ’£</span>
      <span class="mob" style="--d:.2s">ğŸ§±</span>
      <span class="mob" style="--d:.3s">âš—ï¸</span>
      <span class="mob" style="--d:.4s">ğŸ¹</span>
      <span class="mob" style="--d:.5s">ğŸ•·ï¸</span>
      <span class="mob" style="--d:.6s">ğŸŒ‹</span>
      <span class="mob" style="--d:.7s">ğŸ’€</span>
    </div>

    <button class="btn-main" id="btn-start">ğŸ­ Abrir la Agencia</button>
  </div>
</div>

<!-- â•â•â• PANTALLA PRINCIPAL â•â•â• -->
<div id="screen-game" class="screen screen-game">
  <div class="game-grid">

    <!-- IZQUIERDA: Encargos -->
    <div class="panel panel-orders">
      <div class="panel-head">
        <h2 class="panel-title">ğŸ“‹ Encargos Activos</h2>
        <div class="order-badge" id="orders-badge">0 pendientes</div>
      </div>
      <div class="orders-list" id="orders-list">
        <div class="empty-state">
          <div>ğŸ˜´</div>
          <p>Sin encargos por ahora.</p>
          <p class="muted-sm">Espera al siguiente dÃ­a o activa el Modo Caos.</p>
        </div>
      </div>
      <div class="chaos-btn-wrap">
        <button class="btn-chaos" id="btn-chaos">
          <span>ğŸŒ‹</span> MODO CAOS
          <span class="chaos-cost">âˆ’50 ğŸ’</span>
        </button>
        <p class="chaos-tip">Genera 3 encargos Ã©picos instantÃ¡neos</p>
      </div>
    </div>

    <!-- CENTRO: Taller -->
    <div class="panel panel-workshop">
      <div class="panel-head">
        <h2 class="panel-title">âš—ï¸ Taller de Bromas</h2>
        <div class="craft-status" id="craft-status">Selecciona un encargo para craftear</div>
      </div>

      <!-- Materiales activos para craftear -->
      <div class="active-recipe" id="active-recipe">
        <div class="no-recipe">
          <span style="font-size:3rem">ğŸ”¨</span>
          <p>Selecciona un encargo<br>del panel izquierdo</p>
        </div>
      </div>

      <!-- Inventario de materiales -->
      <div class="materials-section">
        <div class="materials-head">
          <h3>ğŸ’ Materiales en Stock</h3>
          <button class="btn-shop-toggle" id="btn-shop-toggle">ğŸ›’ Tienda</button>
        </div>
        <div class="materials-grid" id="materials-grid">
          <p class="muted-sm" style="padding:10px">Sin materiales. Ve a la tienda.</p>
        </div>
      </div>

      <!-- BotÃ³n ejecutar broma -->
      <div class="execute-wrap">
        <button class="btn-execute hidden" id="btn-execute">
          ğŸ’£ Â¡EJECUTAR BROMA!
        </button>
      </div>
    </div>

    <!-- DERECHA: Chat + Tienda -->
    <div class="panel panel-right">

      <!-- TIENDA (oculta por defecto) -->
      <div class="shop-panel hidden" id="shop-panel">
        <div class="panel-head">
          <h2 class="panel-title">ğŸ›’ Tienda de Materiales</h2>
          <button class="btn-shop-close" id="btn-shop-close">âœ• Cerrar</button>
        </div>
        <div class="shop-grid" id="shop-grid"><!-- JS --></div>
      </div>

      <!-- CHAT (visible por defecto) -->
      <div class="chat-panel" id="chat-panel">
        <div class="panel-head">
          <h2 class="panel-title">ğŸ’¬ Chat del Servidor</h2>
          <div class="online-badge"><span class="pulse-dot"></span><span id="online-count">12</span> online</div>
        </div>
        <div class="chat-feed" id="chat-feed">
          <!-- JS -->
        </div>
        <div class="chat-input-wrap">
          <div class="chat-server-tag">[TrollMaster] â–¶</div>
          <div class="chat-type-area">Esperando vÃ­ctimas...</div>
        </div>
      </div>
    </div>

  </div>
</div>

<!-- â•â•â• PANTALLA FINAL â•â•â• -->
<div id="screen-end" class="screen screen-end">
  <div class="end-card">
    <div class="confetti-burst" id="confetti-burst" aria-hidden="true"></div>
    <div class="end-icon" id="end-icon">ğŸ’€</div>
    <h1 class="end-title" id="end-title"></h1>
    <p class="end-sub" id="end-sub"></p>
    <div class="end-stats" id="end-stats"></div>
    <div class="end-rank" id="end-rank"></div>
    <div class="best-prank" id="best-prank"></div>
    <button class="btn-main" id="btn-restart">ğŸ”„ Nueva Temporada de Bromas</button>
  </div>
</div>

<!-- â•â•â• MODAL: CONFIRMAR COMPRA â•â•â• -->
<div id="modal-buy" class="modal-overlay hidden">
  <div class="modal-card pixel-card">
    <div class="modal-head">
      <div class="modal-item-icon" id="buy-icon"></div>
      <div>
        <h3 id="buy-name"></h3>
        <p id="buy-price-info" class="modal-sub"></p>
      </div>
      <button class="close-btn" id="buy-close">âœ•</button>
    </div>
    <div class="modal-body">
      <div class="qty-control">
        <button class="qty-btn" id="buy-minus">âˆ’</button>
        <input class="qty-input" type="number" id="buy-qty" value="1" min="1" max="20" />
        <button class="qty-btn" id="buy-plus">ï¼‹</button>
      </div>
      <div class="modal-total">Total: <strong id="buy-total">0 ğŸ’</strong></div>
      <button class="btn-main" id="buy-confirm">ğŸ’ Comprar</button>
    </div>
  </div>
</div>

<!-- â•â•â• MODAL: RESULTADO BROMA â•â•â• -->
<div id="modal-result" class="modal-overlay hidden">
  <div class="modal-card result-card" id="result-card">
    <div class="result-anim" id="result-anim"></div>
    <h2 class="result-title" id="result-title"></h2>
    <p class="result-desc" id="result-desc"></p>
    <div class="result-reward" id="result-reward"></div>
    <div class="result-reactions" id="result-reactions"></div>
    <button class="btn-main" id="result-close">Continuar â†’</button>
  </div>
</div>

<div id="toast" class="toast" role="status" aria-live="polite"></div>

<script src="ddb.js"></script>
</body>
</html>