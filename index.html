<!doctype html>
<html lang="es">
<head>
  <!-- =========================================================
       Moonveil Portal — Login Pro (MC-Style)
       Mejorado por: ChatGPT
       Notas:
       - Layout 2 columnas con CSS Grid sin superposición.
       - Pane izquierdo con scroll independiente y sticky header de marca.
       - Biomas animados en canvas (bosque, nieve, desierto, océano, nether, pradera).
       - Noticias con autoplay + botones + indicador.
       - Ranking de trueques con iconos y tendencías.
       - Consejos (carrusel) con dots navegables.
       - Pane derecho: Login accesible, fuerza de contraseña, caps-lock,
         demo de credenciales, proveedores simulados y HUD post-login.
       - Todo 100% responsive, dark/light, con tokens CSS.
       ========================================================= -->
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <meta name="color-scheme" content="dark light" />
  <title>Moonveil Portal — Acceso</title>

  <!-- Fuentes -->
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700&family=Press+Start+2P&display=swap" rel="stylesheet">

  <!-- Favicon pixel -->
  <link rel="icon" type="image/svg+xml"
        href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='64' height='64'%3E%3Crect width='100%25' height='100%25' fill='%23111610'/%3E%3Crect x='8' y='8' width='48' height='48' fill='%2330d158'/%3E%3Crect x='14' y='14' width='36' height='36' fill='%2316a34a'/%3E%3C/svg%3E">

  <!-- CSS principal -->
  <link rel="stylesheet" href="login.css" />

  <meta name="description" content="Portal de acceso con estética Minecraft profesional: noticias de aldeanos, biomas animados, ranking de trueques y login seguro con HUD." />
</head>
<body class="theme-auto">
  <!-- Fondo animado (grid + fog) -->
  <div class="bg" aria-hidden="true">
    <div class="bg__grid" aria-hidden="true"></div>
    <div class="bg__fog" aria-hidden="true"></div>
    <canvas id="bgParticles" class="bg__particles" aria-hidden="true"></canvas>
  </div>

  <!-- App -->
  <main id="app" class="shell" role="main" aria-label="Moonveil Portal">
    <!-- =========================================
         IZQUIERDA: Noticias, Biomas, Trueques, Consejos
         ========================================= -->
    <aside class="left-pane" aria-label="Noticias, biomas y consejos de aldeanos">
      <!-- Encabezado marca (sticky) -->
      <header class="lp-header">
        <div class="brand" aria-label="Marca del portal">
          <div class="brand__cube" aria-hidden="true"></div>
          <h1 class="brand__title">
            Moonveil <span>Portal</span>
          </h1>
        </div>
      </header>

      <!-- Noticias de aldeanos -->
      <section class="lp-card news" aria-labelledby="newsTitle" aria-describedby="newsDesc">
        <div class="card-head">
          <div>
            <h2 id="newsTitle">Noticias de aldeanos</h2>
            <p id="newsDesc" class="visually-hidden">
              Lista de publicaciones de aldeanos con nombre, rol, fecha y enlace a imagen. Rotación automática.
            </p>
          </div>
          <div class="news-actions">
            <button class="icon-btn" id="newsPrev" type="button" aria-label="Ver publicaciones anteriores">
              <span class="icon i-left" aria-hidden="true"></span>
            </button>
            <button class="icon-btn" id="newsNext" type="button" aria-label="Ver publicaciones siguientes">
              <span class="icon i-right" aria-hidden="true"></span>
            </button>
            <button class="icon-btn" id="newsPause" type="button" aria-label="Pausar o reanudar rotación">
              <span class="icon i-pause" aria-hidden="true"></span>
            </button>
          </div>
        </div>
        <ul class="news-stream" id="newsStream" aria-live="polite"></ul>
        <div class="news-footer">
          <span class="news-indicator" id="newsIndicator" aria-live="polite">1 / 1</span>
        </div>
      </section>

      <!-- Biomas Canvas -->
      <section class="lp-card biomes" aria-labelledby="biomeTitle" aria-describedby="biomeDesc">
        <div class="card-head">
          <div>
            <h2 id="biomeTitle">Biomas</h2>
            <p id="biomeDesc" class="visually-hidden">
              Escenario visual del bioma con pequeños elementos animados como nieve, árboles o peces. Cambia automáticamente.
            </p>
          </div>
          <div class="biome-nav">
            <button class="icon-btn" id="biomePrev" type="button" aria-label="Bioma anterior">
              <span class="icon i-left" aria-hidden="true"></span>
            </button>
            <button class="icon-btn" id="biomeNext" type="button" aria-label="Bioma siguiente">
              <span class="icon i-right" aria-hidden="true"></span>
            </button>
          </div>
        </div>
        <div class="biome-stage">
          <div class="biome-canvas" id="biomeCanvas"
               aria-live="polite"
               aria-label="Escena de bioma"
               data-autoplay="true"
               data-interval="6000"></div>
        </div>
        <div class="biome-caption" id="biomeCaption">—</div>
      </section>

      <!-- Ranking de trueques -->
      <section class="lp-card trades" aria-labelledby="tradesTitle" aria-describedby="tradesDesc">
        <div class="card-head">
          <div>
            <h2 id="tradesTitle">Ranking de trueques</h2>
            <p id="tradesDesc" class="visually-hidden">
              Tabla de clasificación mostrando los productos más cotizados por los aldeanos, con iconos y tendencia.
            </p>
          </div>
        </div>
        <div class="trades-table-wrap">
          <table class="trades-table" id="tradesTable">
            <caption class="visually-hidden">Clasificación de objetos por demanda de aldeanos</caption>
            <thead>
              <tr>
                <th scope="col">Pos.</th>
                <th scope="col">Objeto</th>
                <th scope="col">Demanda</th>
                <th scope="col">Tendencia</th>
                <th scope="col">Mejor aldeano</th>
              </tr>
            </thead>
            <tbody id="tradesTbody">
              <!-- Filas generadas por JS -->
            </tbody>
          </table>
        </div>
      </section>

      <!-- Consejos Sarcásticos -->
      <section class="lp-card tips" aria-labelledby="tipsTitle" aria-describedby="tipsDesc">
        <div class="card-head">
          <div>
            <h2 id="tipsTitle">Consejos sarcásticos</h2>
            <p id="tipsDesc" class="visually-hidden">
              Carrusel con consejos sarcásticos de aldeanos, cada uno con foto, nombre y texto gracioso.
            </p>
          </div>
          <div class="tips-nav">
            <button class="icon-btn" id="tipsPrev" type="button" aria-label="Consejo anterior">
              <span class="icon i-left" aria-hidden="true"></span>
            </button>
            <button class="icon-btn" id="tipsNext" type="button" aria-label="Consejo siguiente">
              <span class="icon i-right" aria-hidden="true"></span>
            </button>
          </div>
        </div>
        <div class="tips-slider" id="tipsSlider" role="region" aria-roledescription="carrusel" aria-label="Consejos de aldeanos" aria-live="polite">
          <div class="tips-track" id="tipsTrack">
            <!-- Slides generadas por JS -->
          </div>
          <div class="tips-dots" id="tipsDots" role="tablist" aria-label="Indicadores de consejos">
            <!-- Dots generados por JS -->
          </div>
        </div>
      </section>
    </aside>

    <!-- =========================================
         DERECHA: Login + HUD post-login
         ========================================= -->
    <section class="right-pane" aria-label="Acceso al portal">
      <!-- Tarjeta Login -->
      <section class="card login-card" role="form" aria-labelledby="login-title">
        <header class="card__header">
          <h2 id="login-title" class="card-title">Inicia sesión</h2>
        </header>

        <div class="card__body">
          <p class="subtitle">
            Entra a tu <strong>mundo</strong>. 5 credenciales de demo listas. Validación y animaciones.
          </p>
          <form id="loginForm" novalidate>
            <!-- Correo -->
            <div class="field">
              <label for="email">Correo</label>
              <div class="input-wrap">
                <span class="icon i-mail" aria-hidden="true"></span>
                <input id="email"
                       name="email"
                       type="email"
                       inputmode="email"
                       autocomplete="email"
                       placeholder="tu@correo.com"
                       required
                       aria-describedby="emailHelp"
                       aria-invalid="false" />
              </div>
              <small id="emailHelp" class="help">Usa un correo válido.</small>
              <small class="error" data-error-for="email" aria-live="polite"></small>
            </div>
            <!-- Contraseña -->
            <div class="field">
              <label for="password">Contraseña <span id="caps" class="caps" aria-live="polite"></span></label>
              <div class="input-wrap">
                <span class="icon i-lock" aria-hidden="true"></span>
                <input id="password"
                       name="password"
                       type="password"
                       autocomplete="current-password"
                       minlength="8"
                       placeholder="••••••••"
                       required
                       aria-describedby="passHelp"
                       aria-invalid="false" />
                <button type="button" class="icon-btn" id="togglePass" aria-label="Mostrar u ocultar contraseña">
                  <span class="icon i-eye" aria-hidden="true"></span>
                </button>
              </div>
              <!-- Barra de fuerza -->
              <div class="strength" id="strength" aria-hidden="true">
                <div class="bar" data-i="0"></div>
                <div class="bar" data-i="1"></div>
                <div class="bar" data-i="2"></div>
                <div class="bar" data-i="3"></div>
                <div class="bar" data-i="4"></div>
              </div>
             <small id="passHelp" class="help">Mínimo 8 caracteres; mezcla letras, números y símbolos.</small>
              <small class="error" data-error-for="password" aria-live="polite"></small>
            </div>
            <!-- Recordarme y enlaces -->
            <div class="field field--row">
              <label class="checkbox" for="remember">
                <input type="checkbox" id="remember" name="remember" />
                <span class="check" aria-hidden="true"></span>
                <span>Recordarme</span>
              </label>

              <a href="#" class="link" id="forgotLink">¿Olvidaste tu contraseña?</a>
            </div>
            <!-- Credenciales de demo -->
            <div class="field">
              <div class="demo-creds" id="demoCreds" aria-label="Credenciales de demostración">
                <!-- Chips generadas por JS -->
              </div>
              <small class="help">Haz clic en una credencial para autocompletar.</small>
            </div>
            <!-- Botón principal -->
            <button type="submit" class="btn btn--primary" id="submitBtn" aria-live="polite">
              <span class="btn__content">
                <span class="icon i-login" aria-hidden="true"></span>
                <span>Entrar al portal</span>
              </span>
              <span class="btn__spinner" aria-hidden="true"></span>
            </button>
            <!-- Divider -->
            <div class="divider" role="separator" aria-label="o continuar con"></div>
            <!-- Proveedores simulados -->
            <div class="social">
              <button type="button" class="btn btn--ghost" data-oauth="microsoft" aria-label="Continuar con Microsoft">
                <span class="icon i-ms" aria-hidden="true"></span>
                <span>Microsoft</span>
              </button>
              <button type="button" class="btn btn--ghost" data-oauth="google" aria-label="Continuar con Google">
                <span class="icon i-google" aria-hidden="true"></span>
                <span>Google</span>
              </button>
            </div>
          </form>
        </div>
        <footer class="card__footer">
          <p class="hint">
            ¿No tienes cuenta? <a href="#" class="link" id="createLink">Crear una</a>
          </p>
        </footer>
      </section>

      <!-- HUD post-login (se muestra tras login exitoso) -->
      <section class="hud" id="hud" hidden aria-live="polite">
        <div class="hud__header">
          <div class="hud__avatar" aria-hidden="true"></div>
          <div class="hud__info">
            <h3 class="hud__title">Bienvenido/a</h3>
            <p class="hud__subtitle">Tu reino te espera…</p>
          </div>
          <button class="btn btn--ghost hud__close" id="hudClose" aria-label="Cerrar HUD">
            <span class="icon i-close" aria-hidden="true"></span>
            Cerrar
          </button>
        </div>
        <div class="hud__grid">
          <article class="hud__card">
            <h4>Estado del mundo</h4>
            <ul class="hud__list" id="hudWorldList"></ul>
          </article>
          <article class="hud__card">
            <h4>Tus atajos</h4>
            <div class="hud__actions">
              <button class="btn btn--primary"><span class="icon i-play"></span> Entrar</button>
              <button class="btn btn--ghost"><span class="icon i-gear"></span> Ajustes</button>
              <button class="btn btn--ghost"><span class="icon i-shield"></span> Seguridad</button>
            </div>
          </article>
        </div>
      </section>
    </section>
  </main>

  <!-- Toast global -->
  <div id="toast" class="toast" role="status" aria-live="polite" aria-atomic="true"></div>

  <!-- JS principal -->
  <script type="module" src="login.js"></script>
</body>
</html>
