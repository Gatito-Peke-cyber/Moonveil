<!doctype html>
<html lang="es">
<head>
  <!-- =========================================================
       Moonveil Portal — Aniversario
       - Confetti (guardado en localStorage)
       - Misiones con cooldowns (24h, 7d, 30d) -> dan XP
       - Barra XP hasta nivel 20 (requisitos por nivel)
       - Tienda con stock y restocks (24h, 7d, 30d)
       - Insignias/desbloqueos
       - Novedades y aldeanos felicitando (likes persistentes)
       - Diseño coherente con inicio/perfiles/ranking
       ========================================================= -->
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Moonveil — Game</title>


  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700&family=Press+Start+2P&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="moon.css" />
  <meta name="description" content="Aniversario de Moonveil: misiones diarias/semanales/mensuales, tienda con stock y restocks, insignias y felicitaciones. Guarda progreso en localStorage." />
</head>
<body class="theme-auto">
  <!-- Fondo / Partículas / Confetti canvas -->
  <div class="bg">
    <canvas id="bgParticles" aria-hidden="true"></canvas>
    <canvas id="confettiCanvas" aria-hidden="true"></canvas>
    <div class="bg-parallax">
      <div class="layer sky" aria-hidden="true"></div>
      <div class="layer far" aria-hidden="true"></div>
      <div class="layer mid" aria-hidden="true"></div>
      <div class="layer near" aria-hidden="true"></div>
    </div>
  </div>

  <!-- HUD / Navbar -->
  <header class="top-hud" role="banner">
    <nav class="navbar" aria-label="Navegación principal">
      <a class="brand" href="inicio.html" aria-label="Ir a inicio">
        <span class="cube" aria-hidden="true"></span>
        <span class="brand__title">Moonveil <b>Portal</b></span>
      </a>
      <button class="nav-toggle" id="navToggle" aria-label="Abrir menú"><span></span></button>
      <ul class="nav-links" id="navLinks">
        <li><a href="inicio.html">Inicio</a></li>
        <!--<li><a href="perfiles.html">Perfiles</a></li>
        <li><a href="ranking.html">Ranking</a></li>
        <li><a href="noticias.html">Noticias</a></li>-->
        <li><a href="aniversario.html" class="active">Game</a></li>
      </ul>
    </nav>

    <div class="hud-stats" aria-label="Indicadores">
      <div class="hud__bars">
        <div class="hud-bar hp" data-val="100" aria-label="Vida 100%"></div>
        <div class="hud-bar xp" data-val="100" aria-label="Experiencia 100%"></div>
      </div>
      <div class="hud__inv" aria-label="Inventario rápido">
        <button class="slot" title="Esmeraldas"><span class="i i-emerald" aria-hidden="true"></span></button>
        <button class="slot" title="Confeti"><span class="i i-gift" aria-hidden="true"></span></button>
        <button class="slot" title="Insignias"><span class="i i-badge" aria-hidden="true"></span></button>
      </div>
    </div>
  </header>

  <!-- Hero -->
  <section class="hero hero--small" role="region" aria-labelledby="title">
    <div class="container hero__inner">
      <div class="hero__text reveal">
        <h1 id="title">Game <span>Moonveil</span></h1>
        <p class="lead">Estamos aqui para ayudarle administrar su mundo.</p>
      </div>
      <div class="hero__cta reveal">
        <div class="stat">
          <div class="stat__num" id="yearsCount">—</div>
          <div class="stat__label">Moonveil</div>
        </div>
        <div class="stat">
          <div class="stat__num" id="totalXP">—</div>
          <div class="stat__label">XP acumulada</div>
        </div>
        <div class="stat">
          <div class="stat__num" id="lvl">—</div>
          <div class="stat__label">Nivel</div>
        </div>
      </div>
    </div>
  </section>

  <!-- Contenido principal: pestañas -->
  <main class="container main-grid" id="main">
    <aside class="side-pane">
      <div class="card">
        <header class="card__header">
          <h3>Progreso</h3>
        </header>
        <div class="card__body">
          <div class="xp-wrap">
            <div class="xp-bar" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0" id="xpBar">
              <div class="xp-fill" id="xpFill" style="width:0%"></div>
            </div>
            <div class="xp-meta">
              <span id="xpText">0 / 0 XP</span>
              <span id="xpNext">Siguiente: — XP</span>
            </div>
          </div>

          <div class="missions-quick">
            <h4>Lista de Misiones</h4>
            <ul id="missionsQuick" class="list"></ul>
          </div>

          <div class="shop-quick">
            <h4>Tienda</h4>
            <ul id="shopQuick" class="list"></ul>
          </div>
        </div>
      </div>

      <div class="card">
        <header class="card__header"><h3>Insignias</h3></header>
        <div class="card__body" id="badgesPanel">
          <!-- badges inyectadas -->
        </div>
      </div>
    </aside>

    <section class="content-pane">
      <!-- Tabs -->
      <div class="tabs" role="tablist" aria-label="Secciones de aniversario">
        <button class="tab is-on" data-tab="missions" role="tab">Misiones</button>
        <button class="tab" data-tab="tienda" role="tab">Tienda</button>
        <button class="tab" data-tab="insignias" role="tab">Insignias</button>
        <button class="tab" data-tab="novedades" role="tab">Bonificaciones</button>
        <button class="tab" data-tab="aldeanos" role="tab">Contratos</button>
      </div>

      <!-- Panel Misiones -->
      <div class="tab-panel" id="panel-missions" role="tabpanel">
        <header class="panel-head">
          <h2>Misiones de Moonveil</h2>
          <p class="muted">Completa misiones para ganar XP.</p>
        </header>

        <div class="missions-grid" id="missionsGrid">
          <!-- tarjetas inyectadas por JS -->
        </div>

        <br>

        <div class="level-info card">
          <header class="card__header"><h3>Progresión de niveles</h3></header>
          <div class="card__body">
            <ol id="levelsList" class="levels-list"></ol>
          </div>
        </div>
      </div>

      <!-- Panel Tienda -->
      <div class="tab-panel hidden" id="panel-tienda" role="tabpanel" aria-hidden="true">
        <header class="panel-head">
          <h2>Tienda</h2>
          <p class="muted">Aqui podras comprar.</p>
        </header>

        <div class="shop-grid" id="shopGrid"></div>
      </div>

      <!-- Panel Insignias -->
      <div class="tab-panel hidden" id="panel-insignias" role="tabpanel" aria-hidden="true">
        <header class="panel-head"><h2>Insignias</h2><p class="muted">Desbloquea logros.</p></header>
        <div id="badgesGrid" class="badges-grid"></div>
      </div>

      <!-- Panel Novedades -->
      <div class="tab-panel hidden" id="panel-novedades" role="tabpanel" aria-hidden="true">
        <header class="panel-head"><h2>Novedades</h2></header>
        <div id="newsAnn" class="news-ann"></div>
      </div>

      <!-- Panel Aldeanos -->
      <div class="tab-panel hidden" id="panel-aldeanos" role="tabpanel" aria-hidden="true">
        <header class="panel-head"><h2>Contratos</h2><p class="muted">Puedes contratar y darle corazon al que te interese.</p></header>
        <div id="villagerMsgs" class="villager-msgs"></div>
        <button class="like-btn" data-like="${v.id}">
  <span class="heart">❤</span> ${likes}
</button>

      </div>
    </section>
  </main>

  <!-- Toast -->
  <div id="toast" class="toast" role="status" aria-live="polite" aria-atomic="true"></div>

  <!-- JS -->
  <script src="moon.js" type="module"></script>
</body>
</html>
