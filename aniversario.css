/* =========================================================
   Moonveil Portal — Aniversario (CSS)
   Mantiene la estética general: colores, tipografía, sombras.
   Incluye: layout, cards, tabs, xp bar, misión/tier styles,
   tienda, badges, confetti canvas + responsive.
   ========================================================= */

/* Variables */
:root{
  --bg:#0c0f0d; --text:#e8f3ea; --muted:#a9b8ae;
  --primary:#30d158; --accent:#ffc43d; --gold:#ffe4a3;
  --card:#121713; --radius:14px; --shadow:0 10px 30px rgba(0,0,0,.35);
  --speed:260ms; --bezier:cubic-bezier(.22,.61,.36,1);
  --nav-h:66px;
}

/* Reset & base */
*{box-sizing:border-box} html,body{height:100%}
body{
  margin:0;font-family:"Outfit",system-ui,-apple-system,Segoe UI,Roboto,Arial;
  color:var(--text);background:radial-gradient(1200px 800px at 70% -10%, #0d1511 0%, #0c0f0d 40%, #0a0d0a 100%);
  -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
}
a{color:var(--primary);text-decoration:none}
.muted{color:var(--muted)}

/* Background layers */
.bg{position:fixed;inset:0;z-index:-2;pointer-events:none}
#bgParticles, #confettiCanvas{position:absolute;inset:0;z-index:-1}
.bg-parallax{position:absolute;inset:0;overflow:hidden}
.layer{position:absolute;inset:0;background-repeat:repeat-x;background-position:bottom center;opacity:.5}
.layer.sky{background-image:linear-gradient(#0b1411,#09110e)}
.layer.far{background-image:radial-gradient(200px 80px at 70% 100%,#112218 0,#0d1813 70%,transparent 80%)}
.layer.mid{background-image:radial-gradient(200px 80px at 20% 100%,#14291d 0,#0e1b14 70%,transparent 80%)}
.layer.near{background-image:radial-gradient(200px 80px at 50% 100%,#183422 0,#102316 70%,transparent 80%)}

/* Navbar / HUD */
.top-hud{position:sticky;top:0;z-index:50;backdrop-filter:saturate(1.3) blur(6px)}
.navbar{height:var(--nav-h);display:flex;align-items:center;justify-content:space-between;padding:0 18px;background:linear-gradient(180deg, rgba(12,15,13,.72), rgba(12,15,13,.35));border-bottom:1px solid rgba(255,255,255,.06)}
.brand{display:flex;align-items:center;gap:12px;font-weight:700}
.brand .cube{width:22px;height:22px;background:linear-gradient(#35dd64,#1aa346);border-radius:4px}
.nav-links{display:flex;gap:8px;align-items:center;margin:0;padding:0;list-style:none}
.nav-links a{height:38px;padding:0 12px;border-radius:10px;display:inline-flex;align-items:center}
.nav-links a.active{background:rgba(48,209,88,.12);border:1px solid rgba(48,209,88,.18)}

.hud-stats{display:flex;gap:8px;align-items:center;padding:8px;background:linear-gradient(180deg, rgba(18,23,19,.85), rgba(18,23,19,.5));border-bottom-left-radius:14px;border-bottom-right-radius:14px;border:1px solid rgba(255,255,255,.06)}
.hud__bars{display:flex;gap:8px}
.hud-bar{--v:50;width:120px;height:10px;border-radius:12px;background:#0b0f0c;border:1px solid rgba(255,255,255,.06);position:relative}
.hud-bar::after{content:"";position:absolute;inset:0;transform-origin:left center;transform:scaleX(calc(var(--v)/100));background:linear-gradient(90deg, rgba(255,255,255,.12), rgba(255,255,255,.02))}
.hud__inv{display:flex;gap:8px}
.slot{width:36px;height:36px;border-radius:8px;background:linear-gradient(#151c17,#121713);border:1px solid rgba(255,255,255,.06);display:grid;place-items:center}

/* Hero */
.hero{padding:40px 0 12px}
.hero__inner{width:min(1200px,94%);margin:0 auto;display:flex;justify-content:space-between;align-items:center;gap:18px}
.hero__text h1{font-family:"Press Start 2P",monospace;font-size:22px;margin:0;color:#dff6e5}
.hero__text h1 span{color:var(--primary)}
.lead{color:var(--muted);margin:6px 0 0}

.hero__cta{display:flex;gap:14px;align-items:center}
.stat{background:linear-gradient(180deg,#151c17,#111612);padding:10px 14px;border-radius:12px;border:1px solid rgba(255,255,255,.06)}
.stat__num{font-weight:700;font-size:20px;color:var(--gold)}
.stat__label{font-size:12px;color:var(--muted)}

/* Layout */
.container{width:min(1200px,94%);margin:0 auto}
.main-grid{display:grid;grid-template-columns:320px 1fr;gap:18px;padding:12px 0}
.side-pane{position:sticky;top:90px}
.card{background:linear-gradient(180deg,#151c17,#111612);border-radius:12px;border:1px solid rgba(255,255,255,.06);box-shadow:var(--shadow);overflow:hidden;margin-bottom:14px}
.card__header{padding:10px 12px;border-bottom:1px solid rgba(255,255,255,.04)}
.card__body{padding:12px}

/* XP bar */
.xp-bar{height:18px;background:#0b0f0c;border-radius:12px;border:1px solid rgba(255,255,255,.06);position:relative;overflow:hidden}
.xp-fill{height:100%;background:linear-gradient(90deg,var(--primary),#10b981);width:0;transition:width 600ms var(--bezier)}
.xp-meta{display:flex;justify-content:space-between;font-size:13px;color:var(--muted);margin-top:8px}

/* Missions quick list */
.list{list-style:none;padding:0;margin:0}
.list li{padding:6px 0;border-bottom:1px dashed rgba(255,255,255,.03);display:flex;justify-content:space-between;align-items:center}
.mission-cta{display:flex;gap:8px}

/* Tabs */
.tabs{display:flex;gap:8px;background:transparent;margin-bottom:12px}
.tab{padding:8px 12px;border-radius:999px;background:linear-gradient(180deg,#141a16,#101613);border:1px solid rgba(255,255,255,.04);cursor:pointer}
.tab.is-on{box-shadow:0 6px 18px rgba(48,209,88,.12);border:1px solid rgba(48,209,88,.18)}

/* Panels */
.tab-panel{padding:8px}
.hidden{display:none !important}

/* Missions grid */
.missions-grid{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}
.mission-card{background:#0f1411;border-radius:12px;padding:12px;border:1px solid rgba(255,255,255,.04);display:flex;flex-direction:column;gap:8px}
.mission-header{display:flex;justify-content:space-between;align-items:center}
.mission-title{font-weight:700}
.mission-desc{color:var(--muted);font-size:13px}
.mission-meta{display:flex;gap:8px;flex-wrap:wrap}
.mission-actions{display:flex;gap:8px;align-items:center}

/* levels list */
.levels-list{list-style:none;padding:0;margin:0}
.levels-list li{padding:6px 8px;border-radius:8px;border:1px solid rgba(255,255,255,.04);margin-bottom:6px;display:flex;justify-content:space-between;align-items:center}
.levels-list li .need{color:var(--muted);font-size:13px}

/* Shop */
.shop-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:12px}
.shop-item{background:#0f1411;border-radius:12px;padding:10px;border:1px solid rgba(255,255,255,.04);display:flex;flex-direction:column;gap:8px}
.shop-item .stock{font-size:13px;color:var(--muted)}
.shop-item .sold{color:var(--muted);opacity:.7}

/* Badges */
.badges-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:12px}
.badge-card{background:#0f1411;border-radius:12px;padding:10px;border:1px solid rgba(255,255,255,.04);display:flex;align-items:center;gap:10px}
.badge-card.legendary{box-shadow:0 0 12px rgba(255,196,61,.12);border:1px solid rgba(255,196,61,.18)}
.badge-icon{width:48px;height:48px;border-radius:8px;background:linear-gradient(180deg,#1f2a1f,#0f1710);display:grid;place-items:center;font-weight:700;color:var(--gold)}

/* News ann & villager msgs */
.news-ann{display:grid;gap:12px}
.ann-card{background:#0f1411;border-radius:12px;padding:10px;border:1px solid rgba(255,255,255,.04)}
.villager-msgs{display:grid;gap:12px}
.villager{display:flex;gap:10px;align-items:flex-start;background:#0f1411;padding:10px;border-radius:12px;border:1px solid rgba(255,255,255,.04)}
.villager .avatar{width:56px;height:56px;border-radius:10px;background:#0b0f0c;display:grid;place-items:center;font-weight:700}
.villager .body{flex:1}
.villager .actions{display:flex;gap:8px;align-items:center}

/* Responsive */
@media (max-width:1100px){ .main-grid{grid-template-columns:1fr;}.missions-grid{grid-template-columns:1fr} .shop-grid{grid-template-columns:repeat(2,1fr)} .badges-grid{grid-template-columns:repeat(2,1fr)} }
@media (max-width:560px){ .shop-grid{grid-template-columns:1fr} .badges-grid{grid-template-columns:1fr} .hero__inner{flex-direction:column;align-items:flex-start} }

/* Toast */
.toast{position:fixed;bottom:18px;left:50%;transform:translateX(-50%);background:#121713;border-radius:10px;padding:8px 12px;border:1px solid rgba(255,255,255,.06);box-shadow:var(--shadow);opacity:0;pointer-events:none;transition:opacity .25s}
.toast.show{opacity:1;pointer-events:auto}

/* Small helpers */
.btn{padding:8px 10px;border-radius:8px;border:1px solid rgba(255,255,255,.06);background:linear-gradient(180deg,#30d158,#16a34a);color:#041008;cursor:pointer}
.btn-ghost{background:transparent;border:1px solid rgba(255,255,255,.06);color:var(--text)}
.kicker{font-size:12px;color:var(--muted)}




/*efecto de las insignias*/
.badge-card.legendary {
  position: relative;
  border: 1px solid var(--accent);
  animation: glowPulse 3s infinite ease-in-out;
}

.badge-card.legendary::after {
  content: "✦ ✧ ✦";
  position: absolute;
  top: -12px; left: 50%;
  transform: translateX(-50%);
  font-size: 14px;
  letter-spacing: 8px;
  color: var(--gold);
  animation: twinkle 4s infinite ease-in-out;
}

@keyframes glowPulse {
  0%, 100% { box-shadow: 0 0 10px rgba(255,196,61,.3), 0 0 20px rgba(255,196,61,.15); }
  50% { box-shadow: 0 0 22px rgba(255,196,61,.8), 0 0 40px rgba(255,196,61,.4); }
}

@keyframes twinkle {
  0%,100% { opacity: 0; transform: translateX(-50%) scale(0.8); }
  50% { opacity: 1; transform: translateX(-50%) scale(1.2); }
}








/*es el cartel del descuento*/

.shop-item {
  position: relative;
  overflow: hidden;
}

/* Cartelito de descuento */
.discount-flag {
  position: absolute;
  top: 8px;
  right: -32px;
  background: linear-gradient(90deg, #ef4444, #b91c1c);
  color: #fff;
  font-size: 12px;
  font-weight: 700;
  padding: 4px 40px;
  text-align: center;
  transform: rotate(45deg);
  box-shadow: 0 4px 8px rgba(0,0,0,.4);
  pointer-events: none;
  z-index: 2;
}

.shop-item.has-discount {
  border: 1px solid rgba(239,68,68,.4);
  box-shadow: 0 0 14px rgba(239,68,68,.2);
}






.heart-float {
  position: absolute;
  color: red;
  font-size: 20px;
  animation: floatUp 2s ease-out forwards;
  pointer-events: none;
}

@keyframes floatUp {
  from { transform: translateY(0) scale(0.8); opacity: 1; }
  to   { transform: translateY(-50px) scale(1.2); opacity: 0; }
}


